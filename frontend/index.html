<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task Manager Legacy - Simple System</title>

    <!-- CSS propio -->
    <link rel="stylesheet" href="style.css">

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- DataTables Bootstrap 5 CSS -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css">

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <!-- Bootstrap 5 JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- DataTables JS -->
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>
</head>
<body>
<div class="container my-3">
    <h1 class="text-center mb-4">Task Manager Legacy</h1>

    <!-- Login Panel -->
    <div id="loginPanel" class="panel border p-3">
        <h2>Login</h2>
        <div class="form-group mb-2">
            <label>Username:</label>
            <input type="text" id="username" value="admin" class="form-control">
        </div>
        <div class="form-group mb-2">
            <label>Password:</label>
            <input type="password" id="password" value="admin" class="form-control">
        </div>
        <button onclick="login()" class="btn btn-primary mt-2">Sign In</button>
    </div>

    <!-- Main Panel -->
    <div id="mainPanel" class="panel" style="display:none;">
        <div class="header d-flex justify-content-between align-items-center mb-3 p-2 bg-light border">
            <span>User: <strong id="currentUser"></strong></span>
            <button onclick="logout()" class="btn btn-danger btn-sm">Sign Out</button>
        </div>

        <!-- Tabs -->
        <ul class="nav nav-tabs mb-3" id="mainTabs">
            <li class="nav-item"><button class="nav-link active" onclick="showTab('tasks')">Tasks</button></li>
            <li class="nav-item"><button class="nav-link" onclick="showTab('projects')">Projects</button></li>
            <li class="nav-item"><button class="nav-link" onclick="showTab('comments')">Comments</button></li>
            <li class="nav-item"><button class="nav-link" onclick="showTab('search')">Advanced Search</button></li>
            <li class="nav-item"><button class="nav-link" onclick="showTab('reports')">Reports</button></li>
        </ul>

        <!-- TAB: Tasks -->
        <div id="tasksTab" class="tab-content active">
            <h2>Task Management</h2>
            <div class="form-section border p-3 mb-3 bg-light">
                <h3>New/Edit Task</h3>
                <div class="row g-2">
                    <div class="col-md-6"><label>Title:</label><input type="text" id="taskTitle" class="form-control"></div>
                    <div class="col-md-6"><label>Description:</label><textarea id="taskDescription" rows="2" class="form-control"></textarea></div>
                    <div class="col-md-3"><label>Status:</label><select id="taskStatus" class="form-select">
                        <option>Pending</option>
                        <option>In Progress</option>
                        <option>Completed</option>
                        <option>Blocked</option>
                        <option>Cancelled</option>
                    </select></div>
                    <div class="col-md-3"><label>Priority:</label><select id="taskPriority" class="form-select">
                        <option>Low</option><option>Medium</option><option>High</option><option>Critical</option>
                    </select></div>
                    <div class="col-md-3"><label>Project:</label><select id="taskProject" class="form-select"></select></div>
                    <div class="col-md-3"><label>Assigned To:</label><select id="taskAssigned" class="form-select"></select></div>
                    <div class="col-md-3"><label>Due Date:</label><input type="text" id="taskDueDate" placeholder="YYYY-MM-DD" class="form-control"></div>
                    <div class="col-md-3"><label>Estimated Hours:</label><input type="number" id="taskHours" step="0.5" class="form-control"></div>
                </div>
                <div class="mt-2">
                    <button onclick="addTask()" class="btn btn-success btn-sm">Add</button>
                    <button onclick="updateTask()" class="btn btn-primary btn-sm">Update</button>
                    <button onclick="deleteTask()" class="btn btn-danger btn-sm">Delete</button>
                    <button onclick="clearTaskForm()" class="btn btn-secondary btn-sm">Clear</button>
                </div>
            </div>

            <div class="table-section border p-2 mb-3">
                <h3>Task List</h3>
                <table id="tasksTable" class="table table-striped table-bordered">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Title</th>
                            <th>Status</th>
                            <th>Priority</th>
                            <th>Project</th>
                            <th>Assigned</th>
                            <th>Due Date</th>
                        </tr>
                    </thead>
                    <tbody id="tasksTableBody"></tbody>
                </table>
            </div>

            <div class="stats border p-2 bg-light">
                <strong>Statistics:</strong> <span id="statsText"></span>
            </div>
        </div>

        <!-- TAB: Projects -->
        <div id="projectsTab" class="tab-content">
            <h2>Project Management</h2>
            <div class="form-section border p-3 mb-3 bg-light">
                <div class="mb-2"><label>Name:</label><input type="text" id="projectName" class="form-control"></div>
                <div class="mb-2"><label>Description:</label><textarea id="projectDescription" rows="2" class="form-control"></textarea></div>
                <button onclick="addProject()" class="btn btn-success btn-sm">Add</button>
                <button onclick="updateProject()" class="btn btn-primary btn-sm">Update</button>
                <button onclick="deleteProject()" class="btn btn-danger btn-sm">Delete</button>
            </div>
            <div class="table-section border p-2">
                <table class="table table-striped table-bordered">
                    <thead><tr><th>ID</th><th>Name</th><th>Description</th></tr></thead>
                    <tbody id="projectsTableBody"></tbody>
                </table>
            </div>
        </div>

        <!-- TAB: Comments -->
        <div id="commentsTab" class="tab-content">
            <h2>Task Comments</h2>
            <div class="form-section border p-3 mb-3 bg-light">
                <div class="row g-2">
                    <div class="col-md-6">
                        <label>Select Task:</label>
                        <select id="commentTaskSelect" class="form-select" onchange="selectCommentTask()">
                            <option value="">-- Select a task --</option>
                        </select>
                    </div>
                    <div class="col-md-6">
                        <label>Task ID (automatic):</label>
                        <input type="text" id="commentTaskId" class="form-control" readonly>
                    </div>
                </div>
                <div class="mb-2 mt-2"><label>Comment:</label><textarea id="commentText" rows="2" class="form-control"></textarea></div>
                <button onclick="addComment()" class="btn btn-success btn-sm">Add Comment</button>
                <button onclick="loadComments()" class="btn btn-primary btn-sm">Load Comments</button>
            </div>
            <div class="text-area-section border p-2">
                <h3>Comments</h3>
                <textarea id="commentsArea" rows="15" readonly class="form-control"></textarea>
            </div>
        </div>

        <!-- TAB: Advanced Search -->
        <div id="searchTab" class="tab-content">
            <h2>Advanced Search</h2>
            <div class="form-section border p-3 mb-3 bg-light row g-3 align-items-end">
                <div class="col-md-3">
                    <label for="searchText" class="form-label">Text</label>
                    <input type="text" id="searchText" class="form-control" placeholder="Search by title or description">
                </div>
                <div class="col-md-3">
                    <label for="searchStatus" class="form-label">Status</label>
                    <select id="searchStatus" class="form-select">
                        <option value="">All</option>
                        <option>Pending</option>
                        <option>In Progress</option>
                        <option>Completed</option>
                    </select>
                </div>
                <div class="col-md-3">
                    <label for="searchPriority" class="form-label">Priority</label>
                    <select id="searchPriority" class="form-select">
                        <option value="">All</option>
                        <option>Low</option>
                        <option>Medium</option>
                        <option>High</option>
                        <option>Critical</option>
                    </select>
                </div>
                <div class="col-md-3">
                    <label for="searchProject" class="form-label">Project</label>
                    <select id="searchProject" class="form-select">
                        <option value="">All</option>
                    </select>
                </div>
                <div class="col-md-12">
                    <button id="filterBtn" class="btn btn-primary mt-2">Search</button>
                    <button id="clearFilterBtn" class="btn btn-secondary mt-2">Clear</button>
                </div>
            </div>
            <div class="table-section border p-2">
                <table id="searchTable" class="table table-striped table-bordered">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Title</th>
                            <th>Status</th>
                            <th>Priority</th>
                            <th>Project</th>
                        </tr>
                    </thead>
                    <tbody id="searchTableBody"></tbody>
                </table>
            </div>
        </div>

        <!-- TAB: Reports -->
        <div id="reportsTab" class="tab-content">
            <h2>Report Generation</h2>
            <div class="form-section border p-3 mb-3 bg-light">
                <button onclick="generateReport('tasks')" class="btn btn-primary btn-sm">Task Report</button>
                <button onclick="generateReport('projects')" class="btn btn-primary btn-sm">Project Report</button>
                <button onclick="generateReport('users')" class="btn btn-primary btn-sm">User Report</button>
                <button onclick="exportCSV()" class="btn btn-secondary btn-sm">Export to CSV</button>
            </div>
            <div class="text-area-section border p-2">
                <textarea id="reportsArea" rows="20" readonly class="form-control"></textarea>
            </div>
        </div>
    </div>
</div>

<!-- JS principal -->
<script src="app.js"></script>
</body>
</html>
